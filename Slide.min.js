(function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function g(){!a&&this.init&&this.init.apply(this,arguments)}var d=this.prototype;a=!0;var e=new this;a=!1;for(var f in c)e[f]=typeof c[f]=="function"&&typeof d[f]=="function"&&b.test(c[f])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(f,c[f]):c[f];return g.prototype=e,g.prototype.constructor=g,g.extend=arguments.callee,g},this.Slide={},Slide.EventAware=Class.extend({init:function(){this.handlers={}},on:function(a,b){this.handlers[a]=this.handlers[a]||[],this.handlers[a].push(b)},off:function(a,b){if(typeof b=="undefined")this.handlers[a]=[];else for(var c=0;c<this.handlers[a].length;c++)if(this.handlers[a][c]==b){this.handlers[a].splice(c,1);break}},hasHandler:function(a){return this.handlers[a].length>0},fire:function(a,b){var c=b||{};for(var d=0;d<this.handlers[a].length;d++)this.handlers[a][d].call(this,c)}}),Slide.Show=Slide.EventAware.extend({init:function(a,b){this.options=Slide.Util.mergeObjects({playbackSpeed:5e3,repeat:!0,responsive:!0},b),this.target=a,this.items=[],this.current=-1,this.playing=!1,this.handlers={previous:[],next:[],first:[],last:[],start:[],stop:[],play:[],pause:[],to:[],addItem:[],preattach:[],postattach:[],predetach:[],postdetach:[]}},addItem:function(a){this.items.push(a),a.index=this.items.length-1,a.slideshow=this,this.fire("addItem",{index:a.index,item:a})},addItems:function(a){for(var b=0;b<a.length;b++)this.addItem(a[b])},start:function(a){var b=a||1;this.current=b-1,this.items[this.current].attach(),Slide.Util.addEventListener(window,"resize",Slide.Util.bind(this._onWindowResize,this)),Slide.Util.addEventListener(document,"keydown",Slide.Util.bind(this._onKeyDown,this)),this.fire("start")},stop:function(){this.items[this.current].detach(),Slide.Util.removeEventListener(window,"resize",Slide.Util.bind(this._onWindowResize,this)),Slide.Util.removeEventListener(document,"keydown",Slide.Util.bind(this._onKeyDown,this)),this.fire("stop")},play:function(){!this.playing&&(this.options.repeat||this.current<this.items.length-1)&&(this.playing=!0,this._play(),this.fire("play"))},_play:function(){var a=this;this.playInterval=setInterval(function(){a._next()},this.options.playbackSpeed)},_resetPlay:function(){this.playing&&(clearInterval(this.playInterval),this._play())},pause:function(){this.playing&&(this.playing=!1,clearInterval(this.playInterval),this.fire("pause"))},to:function(a){this._resetPlay(),this._to(a)},_to:function(a){var b=this;this.items[this.current].detach(function(){var c=a-1;c>b.items.length-1?c=b.options.repeat?0:b.items.length-1:c<0&&(c=b.options.repeat?b.items.length-1:0),b.current=c,b.items[b.current].attach(),b.current==b.items.length-1&&b.fire("last",b._currentObject()),b.current==0&&b.fire("first",b._currentObject()),b.playing&&!b.options.repeat&&b.current>=b.items.length-1&&b.pause(),b.fire("to",b._currentObject())})},first:function(){this.to(1)},last:function(){this.to(this.items.length)},next:function(){this.to(this.current+2),this.fire("next",this._currentObject())},_next:function(){this._to(this.current+2)},previous:function(){this.to(this.current),this.fire("previous",this._currentObject())},_previous:function(){this._to(this.current)},_currentObject:function(){return{index:this.current,item:this.items[this.current]}},_onWindowResize:function(){this.current>-1&&this.current<this.items.length&&this.items[this.current].invalidate()},_onKeyDown:function(a){var b=a?a:window.event,c=-1;c&&b.keyCode>0?c=b.keyCode:b.which==null?c=b.keyCode:b.which!=0&&b.charCode!=0&&(c=b.which);switch(c){case 32:this.playing?this.pause():this.play();break;case 39:this.next();break;case 37:this.previous()}}}),Slide.Item=Slide.EventAware.extend({init:function(a,b){this.el=a||{},this.classes=Slide.Util.isArray(b)?b:Slide.Util.isString(b)?[b]:[],this.slideshow={},this.index=-1,this.handlers={load:[],invalidate:[]},this._loading=!1,this._detached=!0,this._detaching=!1;for(var c=0;c<this.classes.length;c++)Slide.Util.addClass(this.el,this.classes[c])},attach:function(a){var b=this;this._detached=!1,this.slideshow.fire("preattach",{item:this,attach:function(){b._attach.call(b,a)}}),this.slideshow.hasHandler("preattach")||this._attach(a)},_attach:function(a){if(this._detached)return;if(this._loading){var b=this;setTimeout(function(){b._attach(a)},50)}else{if(typeof this.el=="string"){var c=document.createElement("div");c.innerHTML=this.el,this.el=c.firstChild}else Slide.Util.isElement(this.el)||(this.el=document.createElement("div"));this.slideshow.target.appendChild(this.el),this.invalidate()}this.slideshow.fire("postattach",{item:this}),a&&a.call(null)},detach:function(a){var b=this;this._detached=!0,this.slideshow.fire("predetach",{item:this,detach:function(){b._detach.call(b,a)}}),this.slideshow.hasHandler("predetach")||this._detach(a)},_detach:function(a){this.slideshow.target.innerHTML="",this.slideshow.fire("postdetach",{item:this}),a&&a.call(null)},invalidate:function(){if(this.slideshow.options.responsive){var a=Slide.Util.constrain(this.el.offsetWidth,this.el.offsetHeight,this.slideshow.target.offsetWidth,this.slideshow.target.offsetHeight);this.el.style.width=a.width+"px",this.el.style.height=a.height+"px"}this.fire("invalidate",this)}}),Slide.Image=Slide.Item.extend({init:function(a,b){var c=new Image,d=this;c.onload=function(){d._loading=!1,d.el.style.display="",d.fire("load",d)},c.src=a,c.style.display="none",this._super(c,b),this._loading=!0}}),Slide.HTML=Slide.Item,Slide.Util={bind:function(a,b){return function(){a.apply(b,arguments)}},addClass:function(a,b){a.className+=" "+b},removeClass:function(a,b){var c=new RegExp("(?:^|\\s)"+b+"(?!\\S)","g");a.className=a.className.replace(c,"")},isString:function(a){return typeof a=="string"},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},mergeObjects:function(a,b){if(typeof a=="undefined")return{};if(typeof b=="undefined")return a;var c={};for(var d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c},addEventListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeEventListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},isNode:function(a){return typeof Node=="object"?a instanceof Node:a&&typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string"},isElement:function(a){return typeof HTMLElement=="object"?a instanceof HTMLElement:a&&typeof a=="object"&&a.nodeType===1&&typeof a.nodeName=="string"},getStyle:function(a,b){var c=document.getElementById(a),d={};return c.currentStyle?d=c.currentStyle[b]:window.getComputedStyle&&(d=document.defaultView.getComputedStyle(c,null).getPropertyValue(b)),d},constrain:function(a,b,c,d){if(!c&&!d)return{width:a,height:b};var e=heightRatio=1,f=didHeight=!1;c>0&&a>0&&(e=c/a,f=!0),d>0&&b>0&&(heightRatio=d/b,didHeight=!0);var g=Math.min(e,heightRatio),h=Math.max(e,heightRatio),i=1;a*h>c||b*h>d?i=g:i=h;var j=a*i,k=b*i;return f&&j==c-1&&(j=c),didHeight&&k==d-1&&(k=d),{width:j,height:k}}}})();